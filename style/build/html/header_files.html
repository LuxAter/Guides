

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Header Files &mdash; Google C++ Style Guide 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Google C++ Style Guide 1.0 documentation" href="index.html"/>
        <link rel="next" title="Scoping" href="scoping.html"/>
        <link rel="prev" title="Google C++ Style Guide" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Google C++ Style Guide
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Header Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#self-contained-headers">Self-contained Headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#header-guards">Header Guards</a></li>
<li class="toctree-l2"><a class="reference internal" href="#forward-declarations">Forward Declarations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inline-functions">Inline Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#names-and-order-of-includes">Names and Order of Includes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scoping.html">Scoping</a></li>
<li class="toctree-l1"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_cpp_features.html">Other C++ Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="naming.html">Naming</a></li>
<li class="toctree-l1"><a class="reference internal" href="comments.html">Comments</a></li>
<li class="toctree-l1"><a class="reference internal" href="formatting.html">Formatting</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Google C++ Style Guide</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Header Files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="header-files">
<h1>Header Files<a class="headerlink" href="#header-files" title="Permalink to this headline">¶</a></h1>
<p>In general, every <code class="docutils literal"><span class="pre">.cpp</span></code> file should have an associated <code class="docutils literal"><span class="pre">.hpp</span></code> file. There are some common exceptions, such as unit tests and small <code class="docutils literal"><span class="pre">.cpp</span></code> files containing just a <code class="docutils literal"><span class="pre">main()</span></code> function.</p>
<p>Correct use of header files can make a huge difference to the readability, size and performance of your code.</p>
<p>The following rules will guide you through the various pitfalls of using headers files.</p>
<div class="section" id="self-contained-headers">
<h2>Self-contained Headers<a class="headerlink" href="#self-contained-headers" title="Permalink to this headline">¶</a></h2>
<p>Header files should be self-contained (compile on their own) and end in <code class="docutils literal"><span class="pre">.hpp</span></code>. Non-header files that are meant for including should end in <code class="docutils literal"><span class="pre">.inc</span></code> and be used sparingly.</p>
<p>All header files should be self-contained. Users and refactoring tools should not have to adhere to special conditions to include the header. Specifically, a header should have <a class="reference internal" href="#header-guards">Header Guards</a> and include all other headers it needs.</p>
<p>Prefer placing the definitions for templates and inline functions in the same file as their declarations. The definitions of these constructs must be included into every <code class="docutils literal"><span class="pre">.cpp</span></code> file that uses them, or the program may fail to link in some build configurations. If declarations and definitions are in different files, including the former should transitively include the later. Do not move these definitions to separately included header files (<code class="docutils literal"><span class="pre">-inl.h</span></code>); this practice was common in the past, but is no loner allowed.</p>
<p>As an exception, a template that is explicitly instantiated for all relevant sets of template arguments, or that is a private implementation detail of a class, is allowed to be defined in the one and only <code class="docutils literal"><span class="pre">.cpp</span></code> file that instantiates the template.</p>
<p>There are rare cases where a file designed to be included is not self-contained. These are typically intended to be included at usual locations, such as the middle of another file. They might not use <a class="reference internal" href="#header-guards">Header Guards</a>, and might not include their prerequisites. Name such files with the <code class="docutils literal"><span class="pre">.inc</span></code> extension. Use sparingly, and prefer self-contained headers when possible.</p>
</div>
<div class="section" id="header-guards">
<h2>Header Guards<a class="headerlink" href="#header-guards" title="Permalink to this headline">¶</a></h2>
<p>All header files should have <code class="docutils literal"><span class="pre">#define</span></code> guards to prevent multiple inclusion. The format of the symbol name should be <code class="docutils literal"><span class="pre">&lt;PROJECT&gt;_&lt;PATH&gt;_&lt;FILE&gt;_HPP_</span></code>.</p>
<p>To guarantee uniqueness, they should be based on the full path in a project’s source tree. For example, the file <code class="docutils literal"><span class="pre">foo/src/bar/baz.h</span></code> in the project <code class="docutils literal"><span class="pre">foo</span></code> should have the following guard:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="cp">#ifndef FOO_BAR_BAZ_HPP_</span>
<span class="cp">#define FOO_BAR_BAZ_HPP_</span>

<span class="p">...</span>

<span class="cp">#endif </span><span class="c1">// FOO_BAR_BAZ_HPP_</span>
</pre></div>
</div>
</div>
<div class="section" id="forward-declarations">
<h2>Forward Declarations<a class="headerlink" href="#forward-declarations" title="Permalink to this headline">¶</a></h2>
<p>Avoid using forward declarations where possible. Just <code class="docutils literal"><span class="pre">#include</span></code> the headers you need.</p>
<dl class="docutils">
<dt>Definition:</dt>
<dd>A “forward declaration” is a declaration of a class, function or template without an associated definition.</dd>
<dt>Pros:</dt>
<dd><ul class="first last simple">
<li>Forward declarations can save compile time, as <code class="docutils literal"><span class="pre">#include</span></code>s force the compiler to open more files and process more input.</li>
<li>Forward declarations can save on unnecessary recompilation. <code class="docutils literal"><span class="pre">#include</span></code>s can force your code to be recompiled more often, due to unrelated changes in the header.</li>
</ul>
</dd>
<dt>Cons:</dt>
<dd><ul class="first last simple">
<li>Forward declarations ca hide a dependency, allowing user code to skip necessary recompilation when headers change.</li>
<li>Forward declarations may be broken by subsequent changes to the library. Forward declarations of functions and templates can prevent the header owners from making otherwise-compatible changes to their APIs. Such as widening a parameter type, adding a template parameter with a default value, or migrating to a new namespace.</li>
<li>Forward declaring symbols from namespace <code class="docutils literal"><span class="pre">std::</span></code> yields undefined behavior.</li>
<li>It can be difficult to determine whether a forward declaration or a full <code class="docutils literal"><span class="pre">#include</span></code> is needed. Replacing an <code class="docutils literal"><span class="pre">#include</span></code> with a forward declaration can silent change the meaning of code.</li>
<li>Forward declaring multiple symbols from a header can be more verbose than simply <code class="docutils literal"><span class="pre">#includ</span></code>ing the header.</li>
<li>Structuring code to enable forward declaration (e.g. using pointer members instead of object members) can make code slower and more complex.</li>
</ul>
</dd>
<dt>Decision:</dt>
<dd><ul class="first last simple">
<li>Try to avoid forward declarations of entities defined in another project.</li>
<li>When using a function declared in a header file, always <code class="docutils literal"><span class="pre">#include</span></code> that header.</li>
<li>When using a class template, prefer to <code class="docutils literal"><span class="pre">#include</span></code> its header file.</li>
</ul>
</dd>
</dl>
<p>Please see <a class="reference internal" href="#names-and-order-of-includes">Names and Order of Includes</a> for rules about when to <code class="docutils literal"><span class="pre">#include</span></code> a header.</p>
</div>
<div class="section" id="inline-functions">
<h2>Inline Functions<a class="headerlink" href="#inline-functions" title="Permalink to this headline">¶</a></h2>
<p>Define function inline only when they are small, say, 10 lines or fewer.</p>
<dl class="docutils">
<dt>Definition:</dt>
<dd>You can declare functions in a way that allows the compiler to expand them inline rather than calling them through the usual function call mechanism.</dd>
<dt>Pros:</dt>
<dd><ul class="first last simple">
<li>Inlining a function can generate more efficient object code, as long as the inlined function is small. Feel free to inline accessors and mutators, and other short, performance-critical functions.</li>
</ul>
</dd>
<dt>Cons:</dt>
<dd><ul class="first last simple">
<li>Overuse of inlining can actually make programs slower. Depending on a function’s size, inlining it can cause the code size to increase or decrease. Inlining a very small accessor function will usually decrease code size while inlining a very large function can dramatically increase code size. On modern processors smaller code usually runs faster due to better use of the instruction cache.</li>
</ul>
</dd>
<dt>Decision:</dt>
<dd><ul class="first last simple">
<li>A decent rule of thumb is to not inline a function if it is more than 10 liens long. Beware of destructors, which are often longer than they appear because of implicit member- and base-destructor calls!</li>
<li>It’s typically not cost effective to inline functions with loops or switch statements (unless, in the common case, the loop or switch statement is never executed).</li>
</ul>
</dd>
</dl>
<p>It is important to know that functions are not always inlined even if they are declared as such; for example virtual and recursive functions are not normally inlined. Usually recursive functions should not be inlined. The main reason for making a virtual function inline is to place its definition in the class, either for convenience or to document its behavior, e.g., for accessors and mutators.</p>
</div>
<div class="section" id="names-and-order-of-includes">
<h2>Names and Order of Includes<a class="headerlink" href="#names-and-order-of-includes" title="Permalink to this headline">¶</a></h2>
<p>Use standard order for readability and to avoid hidden dependencies: Related headers, C library, C++ library, other libraries’ <code class="docutils literal"><span class="pre">.h</span></code>/<code class="docutils literal"><span class="pre">.hpp</span></code>, your project’s <code class="docutils literal"><span class="pre">.h</span></code>/<code class="docutils literal"><span class="pre">.hpp</span></code>.</p>
<p>All of a projects headers files should be listed as descendants of the project’s source directory without the use of UNIX directory shortcuts <code class="docutils literal"><span class="pre">.</span></code> (the current directory) or <code class="docutils literal"><span class="pre">..</span></code> (the parent directory). For example, <code class="docutils literal"><span class="pre">google-awesome-project/src/base/logging.hpp</span></code> should be included as:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;base/logging.hpp&quot;</span><span class="cp"></span>
</pre></div>
</div>
<p>In <code class="docutils literal"><span class="pre">dir/foo/cpp</span></code> or <code class="docutils literal"><span class="pre">dir/foo_test.cpp</span></code>, whose main purpose is to implement or test the stuff in <code class="docutils literal"><span class="pre">dir2/foo2.hpp</span></code>, order your includes as follows:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">dir2/foo2.hpp</span></code>.</li>
<li>C system files.</li>
<li>C++ system files.</li>
<li>Other libraries’ <code class="docutils literal"><span class="pre">.h</span></code>/<code class="docutils literal"><span class="pre">.hpp</span></code> files.</li>
<li>Your project’s <code class="docutils literal"><span class="pre">.h</span></code>/<code class="docutils literal"><span class="pre">.hpp</span></code> files.</li>
</ol>
<p>With the preferred ordering, if <code class="docutils literal"><span class="pre">dir2/foo2.hpp</span></code> omits any necessary includes, the build of <code class="docutils literal"><span class="pre">dir/foo.cpp</span></code> or <code class="docutils literal"><span class="pre">dirfoo_test.cpp</span></code> will break. This, this rule ensures that build breaks show up first for the people working of these files, not for innocent people in other packages.</p>
<p><code class="docutils literal"><span class="pre">dir/foo.cpp</span></code> and <code class="docutils literal"><span class="pre">dir2/foo2.hpp</span></code> are usually in the same directory (e.g. <code class="docutils literal"><span class="pre">base/basictypes_test.cpp</span></code> and <code class="docutils literal"><span class="pre">base/basictypes.hpp</span></code>), but may sometimes be in different directories too.</p>
<p>Within each section the includes should be ordered alphabetically. Note that older code might not conform to this rule an should be fixed when convenient.</p>
<p>You should include all the headers that define the symbols you rely upon, except in the unusual case of <a class="reference internal" href="#forward-declarations">Forward Declarations</a>. If you rely on symbols from <code class="docutils literal"><span class="pre">bar.hpp</span></code>, don’t count on the fact that you included <code class="docutils literal"><span class="pre">foo.hpp</span></code> which (currently) includes <code class="docutils literal"><span class="pre">bar.hpp</span></code>: include <code class="docutils literal"><span class="pre">bar.hpp</span></code> yourself, unless <code class="docutils literal"><span class="pre">foo.hpp</span></code> explicitly demonstrates its intent to provide you the symbols of <code class="docutils literal"><span class="pre">bar.hpp</span></code>. However, any includes present in the related header do not need to be included again in the related <code class="docutils literal"><span class="pre">.cpp</span></code> (i.e., <code class="docutils literal"><span class="pre">foo.cpp</span></code> can rely on <code class="docutils literal"><span class="pre">foo.hpp</span></code>’s includes).</p>
<p>For example, the includes in <code class="docutils literal"><span class="pre">google-awesome-project/src/foo/internal/fooserver.cpp</span></code> might look like this:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;foo/server/fooserver.hpp&quot;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;hash_map&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;base/basictypes.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;base/commandlineflags.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;foo/server/bar.hpp&quot;</span><span class="cp"></span>
</pre></div>
</div>
<dl class="docutils">
<dt>Exception:</dt>
<dd>Sometimes, system-specific code needs conditional includes. Such code can put conditional includes after other includes. Of course, keep your system specific code small and localized. Example:</dd>
</dl>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;foo/public/fooserver.hpp&quot;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;base/port.hpp&quot; // For LANG_CXX11.</span><span class="cp"></span>

<span class="cp">#ifndef LANG_CXX11</span>
<span class="cp">#include</span> <span class="cpf">&lt;initializer_list&gt;</span><span class="cp"></span>
<span class="cp">#endif </span><span class="c1">// LANG_CXX11</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="scoping.html" class="btn btn-neutral float-right" title="Scoping" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Google C++ Style Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 Arden Rasmussen.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>